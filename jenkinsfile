pipeline {
    agent any
    
  environment {
     IMAGE=mavan-app
     BUILD_TAG=$BUILD_NUMBER
     PASS=credentials('DOCKER_HUB')
  
  
  }

  stages {

      stage('Building jar'){
          steps {

              sh '''
                  ./jenkins-script/build/mvn.sh mvn -B -DskipTests clean package
                  ./jenkins-script/build/build.sh
              '''

          }
      }
  

      stage('Test'){
          steps{

              sh '''
                ./jenkins-script/test/test.sh mvn test

              '''
          }
      }
    
     stage('Push'){
         steps{
             
             sh '''
                ./jenkins-script/push/push.sh
                
             '''
            }
     }
     
     stage('Deploy'){
         steps{
             
             sh '''
                echo $PWD
                ./jenkins-script/local_deploy/deploy.sh
                
             '''
            }
            
          }


  }  

  }


  
    



  









